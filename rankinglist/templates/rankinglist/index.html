{% extends "rankinglist/base.html" %}

{% block content %}

<button type="button" class="btn btn-primary btn-sm float-right" data-toggle="modal" data-target="#exampleModal">
    Regelwerk
  </button>
  
  <h5>Ranglisten</h5>
  
  {% for r in rankinglists %}
      <h6>{{ r.name }}  <a href="{% url 'rankinglist_stats' rankinglist_id=r.id %}" class="btn btn-primary btn-sm">Statistiken</a></h6>
      
      
      <table class="table table-sm">
        <thead>
            <tr>
            <th scope="col">#</th>
            <th scope="col">Name</th>            
            </tr>
        </thead>
        <tbody>
            {% for pos in r.rankings.all %}
            <tr>
            <td scope="row">{{pos.position}}</td>
            <td><a href="{% url 'player_history' player_id=pos.player.id %}">   {{pos.player.player.nameshort}}</a></td> 
            </tr>
            {% endfor %}
        <tbody>
   </table> 
      
  {% endfor %}
  
  
  <h5>Letzten 10 Spiele <a href="{% url 'matcheshistory' %}" class="btn btn-primary btn-sm">Spielearchiv</a></h5>
  
  <table class="table table-sm">
    <thead>
        <tr>
        <th>Datum</th>
        <th>Rangliste</th>
            <th>Spieler 1 <br>(Sieger)</th>
            <th>Spieler 2</th>
            <th>Ergebnis</th>
            
        </tr>
    </thead>
    <tbody>
    {% for m in matches %}
        <tr>
            <td>{{ m.playedat }}</td>
            <td>{{ m.rankinglist }}</td>
            <td>{{ m.playerone.player.nameshort }}</td>
            <td>{{ m.playertwo.player.nameshort }}</td>
            <td>{{ m.set1playerone }}:{{ m.set1playertwo }}                 
            {{ m.set2playerone }}:{{ m.set2playertwo }}

            {% if m.set3playerone != 0 and m.set3playertwo != 0 %}
                {{ m.set3playerone }}:{{ m.set3playertwo }}
            {% endif %}  
          </td>
           
        </tr>
    {% empty %}
        <tr>
            <td colspan="8">Keine Spiele</td>
        </tr>
    {% endfor %}
    </tbody>
</table> 
  
      <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Regelwerk</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <ul>
              <li>Die Rangliste wird nicht für irgendwelche Auswertungen/Aufstellungen etc. verwendet.</li>
      <li>Start: Alle Spieler, die mitmachen wollen, werden nach ihrer Stärke in der Rangliste angeordnet. Der beste Spieler steht an der Spitze der Rangliste.
      <li>Herausfordern: Um nach oben zu kommen, kann ein Spieler die 3 Spieler direkt über ihm herausfordern. Diese müssen die Herausforderung annehmen.
      <li>Herausforderungen müssen angenommen werden und innerhalb der nächsten 7 Tage gespielt werden, sonst gilt das Spiel als verloren.
      <li>Gewinnt der Herausforderer, werden die Plätze getauscht, verliert er, bleiben die Positionen bestehen. Der neue Stand ist die Basis für weitere Spiele.
      <li>Es darf nur EINE offene Herausforderung bestehen. Erst nachdem das Spiel gespielt ist, darf eine weitere Herausforderung ausgesprochen werden
      <li>Der Spielmodus entspricht denen des Medenspiels z. B. 6:2, 4:6, 10:5 - Championstiebreak im dritten Satz</li>  
      <li>Das Spielergebnis wird dem Administrator (der bekannt sein sollte) so schnell wie möglich gemeldet - spätestens aber nach einem Tag! Dieser aktualisiert dann die Rangliste
          </ul>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Schließen</button>        
        </div>
      </div>
    </div>
  </div>


{% endblock %}